apply plugin: 'maven-publish'

task sourcesJar(type: Jar) {
    archiveClassifier.set("sources")
    from android.sourceSets.main.java.srcDirs
}

artifacts {
    archives sourcesJar
}

artifactoryPublish.dependsOn("build")

afterEvaluate {
    publishing {
        publications {
            mavenPublication(MavenPublication) {
                artifact sourcesJar
                artifact("$buildDir/outputs/aar/$project.name-release.aar")
            }
        }
    }
}
