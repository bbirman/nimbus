apply plugin: 'maven-publish'

task sourcesJar(type: Jar, dependsOn:classes) {
    archiveClassifier.set('sources')
    from sourceSets.main.allSource
}

artifacts {
    archives sourcesJar
}

artifactoryPublish.dependsOn("build")

afterEvaluate {
    publishing {
        publications {
            mavenPublication(MavenPublication) {
//                from components.java
//                artifact sourcesJar
//                artifact("$buildDir/outputs/libs/${project.name}.jar")
            }
        }
    }
    artifactoryPublish {
        publications(publishing.publications.mavenPublication)
    }
}
